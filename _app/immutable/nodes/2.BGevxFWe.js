import{h as _e,r as T,j as O,k as Z,l as ie,m as de,n as ge,q as te,u as me,v as q,w as V,i as M,e as Y,x as ae,f as y,c as U,g as H,a as L,s as f,y as J,b as F,o as $,z as K,d as E,A as he,B as pe,C as xe,p as be}from"../chunks/disclose-version.CmdGQZfx.js";import{j as Q,r as W,k as ze,E as oe,l as we,m as ue,n as le,o as ye,q as X,t as Ee,v as ve,w as ke,x as Ae,y as Ce,c as ee,a as ce,z as m,g as B,p as fe,d as re,u as Le,b as G,h as Ie,s as Se}from"../chunks/runtime.ttkPkfYr.js";import{r as He}from"../chunks/entry.vOHeZM0C.js";import{p as Pe}from"../chunks/stores.D_eroyT9.js";import{g as Me}from"../chunks/main-client.DKSiEih1.js";function Re(){}function qe(a,r,o,u,n,x,z){const w=(o&X)!==0,v=ye(o,a);let k=null;_e(a,w);let c,A=null,d=null,I=!1;v.r=i=>{const _=k,h=_.s;h.add(i),i.f(()=>{h.delete(i),h.size===0&&_.e!==null&&(_.d!==null&&(T(_.d),_.d=null),Q(_.e),_.e=null)})};const t=()=>{const i={d:null,e:null,s:new Set,p:k},_=W(()=>{const h=v.d;h!==null&&(T(h),v.d=null);let p=v.a;(v.f&X)!==0&&(O===null?(p=me(),v.a.appendChild(p)):p=p.firstChild),x(p),i.d=v.d,v.d=null},v,!0);i.e=_,k=i},s=i=>{const _=i.f,h=(_&X)!==0,p=i.a;z(c,i,p,h,n,_,!0,A)},P=W(()=>{var h,p;const i=r();c=ze(i)?i:i==null?[]:Array.from(i),u!==null?A=c.map(u):o&oe||c.map(Re);const _=c.length;if(O!==null){const b=((p=(h=O)==null?void 0:h[0])==null?void 0:p.data)==="ssr:each_else";b&&_||!b&&!_?(T(O),Z(null),I=!0):b&&O.shift()}if(x!==null){if(_===0){if(v.v.length!==0||d===null){s(v),t();return}}else if(v.v.length===0&&k!==null){const b=k,S=b.s;S.size===0?b.d!==null&&(T(b.d),b.d=null):ie(S,"out")}}d!==null&&Ee(d)},v,!1);d=W(s,v,!0),I&&Z([]),we(P,()=>{const i=v.f,_=v.a,h=(i&X)!==0;let p=k;for(;p!==null;){const b=p.d;b!==null&&T(b);const S=p.e;S!==null&&Q(S),p=p.p}z([],v,_,h,n,i,!1,A),Q(d)}),v.e=P}function D(a,r,o,u,n){qe(a,r,o,null,u,n,De)}function De(a,r,o,u,n,x,z){var w=r.v,v=r.s,k=w.length,c=a.length,A=Math.max(k,c),d=0,I,t;if(v.length!==0&&Te(v),c===0)for(I=[],u&&k!==0&&de(o);d<A;)t=w[d++],ne(t,v,z,u);else{var s,P=O!==null;if(I=Array(c),P){for(var i=O,_=i[0];d<A;d++){var h=ge(_);if(Z(h),!h)break;s=a[d],t=se(s,null,d,n,x),I[d]=t,_=h.at(-1).nextSibling.nextSibling}Oe(i,_)}for(;d<A;d++)d>=k?(s=a[d],t=se(s,null,d,n,x),I[d]=t,Ue(t,o,u,null)):d>=c?(t=w[d],ne(t,v,z)):(s=a[d],t=w[d],I[d]=t,Be(t,s,d,x));P&&O===null&&Z([])}r.v=I}function Oe(a,r){if(r!==null){var o=a.indexOf(r);o!==-1&&a.length>o+1&&T(a.slice(o))}}function Ue(a,r,o,u){var n=a.d;return u===null?o?te(n,r,null):te(n,r.parentNode,r):te(n,null,u)}function Te(a){var r=a.length;if(r>0){for(var o=0,u,n;o<r;o++)u=a[o],n=u.r,n!==null&&(u.r=null,ne(u,null,!1));a.length=0}}function Be(a,r,o,u){const n=a.v;u&ue&&le(n,r);const x=a.s,z=(u&ve)!==0,w=a.a;x!==null&&u&oe&&w!==null&&w(a,x),z?le(a.i,o):a.i=o}function ne(a,r,o,u=!1){const n=a.s;if(o&&n!==null){for(let z of n)z.r==="key"&&n.delete(z);if(n.size===0)a.s=null;else{ie(n,"out"),r!==null&&r.push(a);return}}const x=a.d;!u&&x!==null&&T(x),Q(a.e)}function se(a,r,o,u,n){const z=(n&ue)===0?a:n&Ae?ee(a):Ce(a),w=n&ve?ee(o):o,v=ke(z,w,r),k=W(c=>{u(null,c.v,c.i)},v,!0);return v.e=k,v}var Ne=E('<div class="card-logo svelte-tp78xv"><img alt="Organization Logo" class="svelte-tp78xv"></div>'),je=E("(<code>ðŸ§©.partOf</code>)",!0),Fe=E('<a target="_blank"> </a>'),Ve=E('<hr style="width: 20px; display: inline-block">'),Ye=E("<p> </p>"),Ke=E("<p>... and <button> </button></p>"),Xe=E("<address><!> <!> <p><!> <!> <!></p> <!></address>"),Ge=E('<div class="card-logo svelte-tp78xv"><img alt="Portal Logo" class="svelte-tp78xv"></div>'),Je=E("Portal",!0),Qe=E('<p class="portal-description svelte-tp78xv"> </p>'),We=E('<a target="_blank">Log In</a>'),Ze=E('<p class="missing svelte-tp78xv">(Missing Portal URL)</p>'),$e=E("<p> </p>"),et=E('<p class="missing svelte-tp78xv">(Missing FHIR Endpoint)</p>'),tt=E('<div class="portal-info svelte-tp78xv"><!> <h3><!></h3> <!> <!> <!></div>'),at=E('<div class="card svelte-tp78xv"><!> <div class="card-content"><h2> <!></h2> <!> <!> <!></div></div>');function rt(a,r){ce(r,!0);let o=3,u=ee(!1);function n(t){t.target.src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1024' height='1024'><path d='M0 0h1024v1024H0z' style='fill:%23eee'/><text x='40' y='170' style='font-size:150px'>broken img :/</text></svg>"}var x=H(a,!0,at),z=L(x),w=f(f(z,!0)),v=L(w),k=L(v),c=f(k),A=f(f(v,!0)),d=f(f(A,!0)),I=f(f(d,!0));q(k,()=>{var t;return`${V((t=r.organization)==null?void 0:t.name)} `}),M(z,()=>r.organization.extension,t=>{var s=J(t),P=F(s);D(P,()=>r.organization.extension,65,(i,_,h)=>{var p=J(i),b=F(p);M(b,()=>m(_).url==="http://hl7.org/fhir/StructureDefinition/organization-brand",S=>{var N=J(S),l=F(N);D(l,()=>m(_).extension.filter(e=>e.url==="brandLogo"),65,(e,g,C)=>{var R=H(e,!0,Ne),j=L(R);Y(j,"src",()=>m(g).valueUrl),ae("error",j,n,!1),y(e,R)},null),U(S,N)},null),U(i,p)},null),U(t,s)},null),M(c,()=>{var t;return(t=r.organization)==null?void 0:t.partOf},t=>{var s=$(t,!0,je);U(t,s)},null),M(A,()=>r.organization.telecom,t=>{var s=H(t,!0,Fe),P=L(s);Y(s,"href",()=>r.organization.telecom.find(i=>i.system==="url").value),q(P,()=>r.organization.telecom.find(i=>i.system==="url").value),y(t,s)},null),D(d,()=>{var t;return(t=r.organization.address)==null?void 0:t.slice(0,B(u)?Math.Infinity:o)},65,(t,s,P)=>{var i=H(t,!0,Xe),_=L(i),h=f(f(_,!0)),p=f(f(h,!0)),b=L(p),S=f(f(b,!0)),N=f(f(S,!0)),l=f(f(p,!0));M(_,()=>m(P)>0,e=>{var g=H(e,!0,Ve);y(e,g)},null),M(h,()=>m(s).line,e=>{var g=H(e,!0,Ye),C=L(g);q(C,()=>m(s).line.join(", ")),y(e,g)},null),M(b,()=>m(s).city,e=>{var g=K(e);q(g,()=>`${V(m(s).city)},`),y(e,g)},null),M(S,()=>m(s).state,e=>{var g=K(e);q(g,()=>m(s).state),y(e,g)},null),M(N,()=>m(s).postalCode,e=>{var g=K(e);q(g,()=>m(s).postalCode),y(e,g)},null),M(l,()=>!B(u)&&m(P)===o-1&&r.organization.address.length>o,e=>{var g=H(e,!0,Ke),C=f(L(g)),R=L(C);q(R,()=>`${V(r.organization.address.length-o)} more`),ae("click",C,()=>re(u,!B(u)),!1),y(e,g)},null),y(t,i)},null),D(I,()=>r.organization.extension.filter(t=>t.url==="http://hl7.org/fhir/StructureDefinition/organization-portal"),65,(t,s,P)=>{var i=H(t,!0,tt),_=L(i),h=f(f(_,!0)),p=L(h),b=f(f(h,!0)),S=f(f(b,!0)),N=f(f(S,!0));D(_,()=>m(s).extension.filter(l=>l.url==="portalLogo"),65,(l,e,g)=>{var C=H(l,!0,Ge),R=L(C);Y(R,"src",()=>m(e).valueUrl),ae("error",R,n,!1),y(l,C)},null),M(p,()=>{var l;return m(s).extension.find(e=>e.url==="portalName").valueString!==((l=r.organization)==null?void 0:l.name)},l=>{var e=K(l);q(e,()=>m(s).extension.find(g=>g.url==="portalName").valueString),y(l,e)},l=>{var e=$(l,!0,Je);U(l,e)}),M(b,()=>m(s).extension.find(l=>l.url==="portalDescription"),l=>{var e=H(l,!0,Qe),g=L(e);q(g,()=>m(s).extension.find(C=>C.url==="portalDescription").valueMarkdown),y(l,e)},null),D(S,()=>{var l;return(l=m(s))==null?void 0:l.extension.filter(e=>e.url==="portalUrl")},65,(l,e,g)=>{var C=H(l,!0,We);Y(C,"href",()=>{var R;return(R=m(e))==null?void 0:R.valueUrl}),y(l,C)},l=>{var e=H(l,!0,Ze);y(l,e)}),D(N,()=>m(s).extension.filter(l=>l.url==="portalEndpoint"),65,(l,e,g)=>{var C=H(l,!0,$e),R=L(C);q(R,()=>{var j;return`FHIR: ${V(((j=r.db[m(e).valueReference.reference])==null?void 0:j.address)||m(e).valueReference.reference)}`}),y(l,C)},l=>{var e=H(l,!0,et);y(l,e)}),y(t,i)},null),y(a,x),fe()}var nt=E("Loading brand bundles...",!0),lt=E('<input class="search svelte-10e25op" type="text" placeholder="search"> <!> <div class="cards svelte-10e25op"></div>',!0);function ct(a,r){ce(r,!0);const o={};Le(o);const u=()=>Se(Pe,"$page",o);let n=Me("brandStore"),x=ee("");G(()=>{Ie(async function(){const c=u().url.searchParams.getAll("bundle");u().url.searchParams.has("inboundBundle")?n.initialize({inline:[parseInt(u().url.searchParams.get("inboundBundle"))]}):n.initialize({urls:c});const A=u().url.searchParams.get("q");A&&re(x,be(A))})}),G(()=>{const c=new URLSearchParams(window.location.search);B(x)!==c.get("q")&&(c.set("q",B(x)),He("?"+c.toString(),{}))}),G(()=>{n.search({query:B(x)})}),G(()=>{const c=()=>{2*window.innerHeight+window.scrollY>=document.body.offsetHeight&&n.nextPage()};return window.addEventListener("scroll",c),()=>{window.removeEventListener("scroll",c)}});var z=$(a,!0,lt),w=F(z);xe(w),he(w,!0);var v=f(f(w,!0)),k=f(f(v,!0));pe(w,()=>B(x),c=>re(x,c)),M(v,()=>n==null?void 0:n.loading,c=>{var A=$(c,!0,nt);U(c,A)},null),D(k,()=>(n==null?void 0:n.hits)||[],73,(c,A,d)=>{var I=J(c),t=F(I);rt(t,{get organization(){return m(A)},get db(){return n.db}}),U(c,I)},null),U(a,z),fe()}export{ct as component};
