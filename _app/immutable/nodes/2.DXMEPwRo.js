import{h as ce,r as N,e as T,f as W,g as se,i as de,j as ge,k as ee,l as me,m as O,n as V,p as R,q as Y,u as te,v as w,c as q,w as I,b as A,s as v,x as G,d as B,o as Z,y as K,t as y,z as he,A as xe,B as pe,C as be}from"../chunks/disclose-version.KvM7XAWq.js";import{e as J,r as Q,f as ze,E as oe,h as we,j as ue,k as le,l as ye,m as X,n as Ee,o as fe,q as ke,t as Ce,v as Ae,w as $,b as ve,x as g,y as F,p as _e,z as ne,u as ae,a as Le}from"../chunks/runtime.FeI5aKGZ.js";import{g as Ie}from"../chunks/main-client.BUVSBVJO.js";function He(){}function Me(t,l,a,u,f,p,z){const C=(a&X)!==0,n=ye(a,t);let x=null;ce(t,C);let E,H=null,c=null,D=!1;n.r=o=>{const _=x,m=_.s;m.add(o),o.f(()=>{m.delete(o),m.size===0&&_.e!==null&&(_.d!==null&&(N(_.d),_.d=null),J(_.e),_.e=null)})};const r=()=>{const o={d:null,e:null,s:new Set,p:x},_=Q(()=>{const m=n.d;m!==null&&(N(m),n.d=null);let h=n.a;(n.f&X)!==0&&(T===null?(h=me(),n.a.appendChild(h)):h=h.firstChild),p(h),o.d=n.d,n.d=null},n,!0);o.e=_,x=o},s=o=>{const _=o.f,m=(_&X)!==0,h=o.a;z(E,o,h,m,f,_,!0,H)},M=Q(()=>{var m,h;const o=l();E=ze(o)?o:o==null?[]:Array.from(o),u!==null?H=E.map(u):a&oe||E.map(He);const _=E.length;if(T!==null){const b=((h=(m=T)==null?void 0:m[0])==null?void 0:h.data)==="ssr:each_else";b&&_||!b&&!_?(N(T),W(null),D=!0):b&&T.shift()}if(p!==null){if(_===0){if(n.v.length!==0||c===null){s(n),r();return}}else if(n.v.length===0&&x!==null){const b=x,L=b.s;L.size===0?b.d!==null&&(N(b.d),b.d=null):se(L,"out")}}c!==null&&Ee(c)},n,!1);c=Q(s,n,!0),D&&W([]),we(M,()=>{const o=n.f,_=n.a,m=(o&X)!==0;let h=x;for(;h!==null;){const b=h.d;b!==null&&N(b);const L=h.e;L!==null&&J(L),h=h.p}z([],n,_,m,f,o,!1,H),J(c)}),n.e=M}function U(t,l,a,u,f){Me(t,l,a,null,u,f,Re)}function Re(t,l,a,u,f,p,z){var C=l.v,n=l.s,x=C.length,E=t.length,H=Math.max(x,E),c=0,D,r;if(n.length!==0&&Oe(n),E===0)for(D=[],u&&x!==0&&de(a);c<H;)r=C[c++],re(r,n,z,u);else{var s,M=T!==null;if(D=Array(E),M){for(var o=T,_=o[0];c<H;c++){var m=ge(_);if(W(m),!m)break;s=t[c],r=ie(s,null,c,f,p),D[c]=r,_=m.at(-1).nextSibling.nextSibling}Se(o,_)}for(;c<H;c++)c>=x?(s=t[c],r=ie(s,null,c,f,p),D[c]=r,De(r,a,u,null)):c>=E?(r=C[c],re(r,n,z)):(s=t[c],r=C[c],D[c]=r,Ue(r,s,c,p));M&&T===null&&W([])}l.v=D}function Se(t,l){if(l!==null){var a=t.indexOf(l);a!==-1&&t.length>a+1&&N(t.slice(a))}}function De(t,l,a,u){var f=t.d;return u===null?a?ee(f,l,null):ee(f,l.parentNode,l):ee(f,null,u)}function Oe(t){var l=t.length;if(l>0){for(var a=0,u,f;a<l;a++)u=t[a],f=u.r,f!==null&&(u.r=null,re(u,null,!1));t.length=0}}function Ue(t,l,a,u){const f=t.v;u&ue&&le(f,l);const p=t.s,z=(u&fe)!==0,C=t.a;p!==null&&u&oe&&C!==null&&C(t,p),z?le(t.i,a):t.i=a}function re(t,l,a,u=!1){const f=t.s;if(a&&f!==null){for(let z of f)z.r==="key"&&f.delete(z);if(f.size===0)t.s=null;else{se(f,"out"),l!==null&&l.push(t);return}}const p=t.d;!u&&p!==null&&N(p),J(t.e)}function ie(t,l,a,u,f){const z=(f&ue)===0?t:f&Ce?$(t):Ae(t),C=f&fe?$(a):a,n=ke(z,C,l),x=Q(E=>{u(null,E.v,E.i)},n,!0);return n.e=x,n}var Te=y('<div class="card-logo svelte-1ouna7f"><img alt="Organization Logo" class="svelte-1ouna7f"></div>'),qe=y("(<code>ðŸ§©.partOf</code>)",!0),Ne=y('<a target="_blank"> </a>'),Pe=y('<hr style="width: 20px; display: inline-block">'),je=y("<p> </p>"),Be=y("<p>... and <button> </button></p>"),Fe=y("<address><!> <!> <p><!> <!> <!></p> <!></address>"),Ve=y('<div class="card-logo svelte-1ouna7f"><img alt="Portal Logo" class="svelte-1ouna7f"></div>'),Ye=y("Portal",!0),Ke=y('<p class="portal-description svelte-1ouna7f"> </p>'),Xe=y('<a target="_blank">Log In</a>'),Ge=y('<p class="missing svelte-1ouna7f">(Missing Portal URL)</p>'),Je=y("<p> </p>"),Qe=y('<p class="missing svelte-1ouna7f">(Missing FHIR Endpoint)</p>'),We=y('<div class="portal-info svelte-1ouna7f"><!> <h3><!></h3> <!> <!> <!></div>'),Ze=y('<div class="card svelte-1ouna7f"><!> <div class="card-content"><h2> <!></h2> <!> <!> <!></div></div>');function $e(t,l){ve(l,!0);let a=3,u=$(!1);function f(r){r.target.src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1024' height='1024'><path d='M0 0h1024v1024H0z' style='fill:%23eee'/><text x='40' y='170' style='font-size:150px'>broken img :/</text></svg>"}var p=I(t,!0,Ze),z=A(p),C=v(v(z,!0)),n=A(C),x=A(n),E=v(x),H=v(v(n,!0)),c=v(v(H,!0)),D=v(v(c,!0));O(x,()=>{var r;return`${V((r=l.organization)==null?void 0:r.name)} `}),R(z,()=>l.organization.extension,r=>{var s=G(r),M=B(s);U(M,()=>l.organization.extension,65,(o,_,m)=>{var h=G(o),b=B(h);R(b,()=>g(_).url==="http://hl7.org/fhir/StructureDefinition/organization-brand",L=>{var P=G(L),i=B(P);U(i,()=>g(_).extension.filter(e=>e.url==="brandLogo"),65,(e,d,k)=>{var S=I(e,!0,Te),j=A(S);Y(j,"src",()=>g(d).valueUrl),te("error",j,f,!1),w(e,S)},null),q(L,P)},null),q(o,h)},null),q(r,s)},null),R(E,()=>{var r;return(r=l.organization)==null?void 0:r.partOf},r=>{var s=Z(r,!0,qe);q(r,s)},null),R(H,()=>l.organization.telecom,r=>{var s=I(r,!0,Ne),M=A(s);Y(s,"href",()=>l.organization.telecom.find(o=>o.system==="url").value),O(M,()=>l.organization.telecom.find(o=>o.system==="url").value),w(r,s)},null),U(c,()=>{var r;return(r=l.organization.address)==null?void 0:r.slice(0,F(u)?Math.Infinity:a)},65,(r,s,M)=>{var o=I(r,!0,Fe),_=A(o),m=v(v(_,!0)),h=v(v(m,!0)),b=A(h),L=v(v(b,!0)),P=v(v(L,!0)),i=v(v(h,!0));R(_,()=>g(M)>0,e=>{var d=I(e,!0,Pe);w(e,d)},null),R(m,()=>g(s).line,e=>{var d=I(e,!0,je),k=A(d);O(k,()=>g(s).line.join(", ")),w(e,d)},null),R(b,()=>g(s).city,e=>{var d=K(e);O(d,()=>`${V(g(s).city)},`),w(e,d)},null),R(L,()=>g(s).state,e=>{var d=K(e);O(d,()=>g(s).state),w(e,d)},null),R(P,()=>g(s).postalCode,e=>{var d=K(e);O(d,()=>g(s).postalCode),w(e,d)},null),R(i,()=>!F(u)&&g(M)===a-1&&l.organization.address.length>a,e=>{var d=I(e,!0,Be),k=v(A(d)),S=A(k);O(S,()=>`${V(l.organization.address.length-a)} more`),te("click",k,()=>ne(u,!F(u)),!1),w(e,d)},null),w(r,o)},null),U(D,()=>l.organization.extension.filter(r=>r.url==="http://hl7.org/fhir/StructureDefinition/organization-portal"),65,(r,s,M)=>{var o=I(r,!0,We),_=A(o),m=v(v(_,!0)),h=A(m),b=v(v(m,!0)),L=v(v(b,!0)),P=v(v(L,!0));U(_,()=>g(s).extension.filter(i=>i.url==="portalLogo"),65,(i,e,d)=>{var k=I(i,!0,Ve),S=A(k);Y(S,"src",()=>g(e).valueUrl),te("error",S,f,!1),w(i,k)},null),R(h,()=>{var i;return g(s).extension.find(e=>e.url==="portalName").valueString!==((i=l.organization)==null?void 0:i.name)},i=>{var e=K(i);O(e,()=>g(s).extension.find(d=>d.url==="portalName").valueString),w(i,e)},i=>{var e=Z(i,!0,Ye);q(i,e)}),R(b,()=>g(s).extension.find(i=>i.url==="portalDescription"),i=>{var e=I(i,!0,Ke),d=A(e);O(d,()=>g(s).extension.find(k=>k.url==="portalDescription").valueMarkdown),w(i,e)},null),U(L,()=>{var i;return(i=g(s))==null?void 0:i.extension.filter(e=>e.url==="portalUrl")},65,(i,e,d)=>{var k=I(i,!0,Xe);Y(k,"href",()=>{var S;return(S=g(e))==null?void 0:S.valueUrl}),w(i,k)},i=>{var e=I(i,!0,Ge);w(i,e)}),U(P,()=>g(s).extension.filter(i=>i.url==="portalEndpoint"),65,(i,e,d)=>{var k=I(i,!0,Je),S=A(k);O(S,()=>{var j;return`FHIR: ${V(((j=l.db[g(e).valueReference.reference])==null?void 0:j.address)||g(e).valueReference.reference)}`}),w(i,k)},i=>{var e=I(i,!0,Qe);w(i,e)}),w(r,o)},null),w(t,p),_e()}var et=y("Loading brand bundles...",!0),tt=y('<input class="search svelte-10e25op" type="text" placeholder="search"> <!> <div class="cards svelte-10e25op"></div>',!0);function lt(t,l){ve(l,!0);let a=Ie("brandStore"),u=$("");ae(()=>{Le(async function(){a.initialize();const x=new URLSearchParams(window.location.search).get("q");x&&ne(u,be(x))})}),ae(()=>{a.search({query:F(u)})}),ae(()=>{const n=()=>{2*window.innerHeight+window.scrollY>=document.body.offsetHeight&&a.nextPage()};return window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}});var f=Z(t,!0,tt),p=B(f);pe(p),he(p,!0);var z=v(v(p,!0)),C=v(v(z,!0));xe(p,()=>F(u),n=>ne(u,n)),R(z,()=>a==null?void 0:a.loading,n=>{var x=Z(n,!0,et);q(n,x)},null),U(C,()=>(a==null?void 0:a.hits)||[],73,(n,x,E)=>{var H=G(n),c=B(H);$e(c,{get organization(){return g(x)},get db(){return a.db}}),q(n,H)},null),q(t,f),_e()}export{lt as component};
