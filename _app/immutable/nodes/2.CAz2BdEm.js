import{h as ce,r as N,e as T,f as W,g as se,i as de,j as ge,k as ee,l as xe,m as O,n as V,p as R,q as Y,u as te,v as w,c as q,w as I,b as A,s as f,x as G,d as B,o as Z,y as K,t as y,z as me,A as he,B as pe,C as be}from"../chunks/disclose-version.KvM7XAWq.js";import{e as J,r as Q,f as ze,E as oe,h as we,j as ue,k as le,l as ye,m as X,n as Ee,o as ve,q as ke,t as Ce,v as Ae,w as $,b as fe,x as g,y as F,p as _e,z as ne,u as ae,a as Le}from"../chunks/runtime.FeI5aKGZ.js";import{g as Ie}from"../chunks/main-client.BUVSBVJO.js";function He(){}function Me(t,l,a,u,v,p,z){const C=(a&X)!==0,n=ye(a,t);let h=null;ce(t,C);let E,H=null,c=null,D=!1;n.r=o=>{const _=h,x=_.s;x.add(o),o.f(()=>{x.delete(o),x.size===0&&_.e!==null&&(_.d!==null&&(N(_.d),_.d=null),J(_.e),_.e=null)})};const r=()=>{const o={d:null,e:null,s:new Set,p:h},_=Q(()=>{const x=n.d;x!==null&&(N(x),n.d=null);let m=n.a;(n.f&X)!==0&&(T===null?(m=xe(),n.a.appendChild(m)):m=m.firstChild),p(m),o.d=n.d,n.d=null},n,!0);o.e=_,h=o},s=o=>{const _=o.f,x=(_&X)!==0,m=o.a;z(E,o,m,x,v,_,!0,H)},M=Q(()=>{var x,m;const o=l();E=ze(o)?o:o==null?[]:Array.from(o),u!==null?H=E.map(u):a&oe||E.map(He);const _=E.length;if(T!==null){const b=((m=(x=T)==null?void 0:x[0])==null?void 0:m.data)==="ssr:each_else";b&&_||!b&&!_?(N(T),W(null),D=!0):b&&T.shift()}if(p!==null){if(_===0){if(n.v.length!==0||c===null){s(n),r();return}}else if(n.v.length===0&&h!==null){const b=h,L=b.s;L.size===0?b.d!==null&&(N(b.d),b.d=null):se(L,"out")}}c!==null&&Ee(c)},n,!1);c=Q(s,n,!0),D&&W([]),we(M,()=>{const o=n.f,_=n.a,x=(o&X)!==0;let m=h;for(;m!==null;){const b=m.d;b!==null&&N(b);const L=m.e;L!==null&&J(L),m=m.p}z([],n,_,x,v,o,!1,H),J(c)}),n.e=M}function U(t,l,a,u,v){Me(t,l,a,null,u,v,Re)}function Re(t,l,a,u,v,p,z){var C=l.v,n=l.s,h=C.length,E=t.length,H=Math.max(h,E),c=0,D,r;if(n.length!==0&&Oe(n),E===0)for(D=[],u&&h!==0&&de(a);c<H;)r=C[c++],re(r,n,z,u);else{var s,M=T!==null;if(D=Array(E),M){for(var o=T,_=o[0];c<H;c++){var x=ge(_);if(W(x),!x)break;s=t[c],r=ie(s,null,c,v,p),D[c]=r,_=x.at(-1).nextSibling.nextSibling}Se(o,_)}for(;c<H;c++)c>=h?(s=t[c],r=ie(s,null,c,v,p),D[c]=r,De(r,a,u,null)):c>=E?(r=C[c],re(r,n,z)):(s=t[c],r=C[c],D[c]=r,Ue(r,s,c,p));M&&T===null&&W([])}l.v=D}function Se(t,l){if(l!==null){var a=t.indexOf(l);a!==-1&&t.length>a+1&&N(t.slice(a))}}function De(t,l,a,u){var v=t.d;return u===null?a?ee(v,l,null):ee(v,l.parentNode,l):ee(v,null,u)}function Oe(t){var l=t.length;if(l>0){for(var a=0,u,v;a<l;a++)u=t[a],v=u.r,v!==null&&(u.r=null,re(u,null,!1));t.length=0}}function Ue(t,l,a,u){const v=t.v;u&ue&&le(v,l);const p=t.s,z=(u&ve)!==0,C=t.a;p!==null&&u&oe&&C!==null&&C(t,p),z?le(t.i,a):t.i=a}function re(t,l,a,u=!1){const v=t.s;if(a&&v!==null){for(let z of v)z.r==="key"&&v.delete(z);if(v.size===0)t.s=null;else{se(v,"out"),l!==null&&l.push(t);return}}const p=t.d;!u&&p!==null&&N(p),J(t.e)}function ie(t,l,a,u,v){const z=(v&ue)===0?t:v&Ce?$(t):Ae(t),C=v&ve?$(a):a,n=ke(z,C,l),h=Q(E=>{u(null,E.v,E.i)},n,!0);return n.e=h,n}var Te=y('<div class="card-logo svelte-tp78xv"><img alt="Organization Logo" class="svelte-tp78xv"></div>'),qe=y("(<code>ðŸ§©.partOf</code>)",!0),Ne=y('<a target="_blank"> </a>'),Pe=y('<hr style="width: 20px; display: inline-block">'),je=y("<p> </p>"),Be=y("<p>... and <button> </button></p>"),Fe=y("<address><!> <!> <p><!> <!> <!></p> <!></address>"),Ve=y('<div class="card-logo svelte-tp78xv"><img alt="Portal Logo" class="svelte-tp78xv"></div>'),Ye=y("Portal",!0),Ke=y('<p class="portal-description svelte-tp78xv"> </p>'),Xe=y('<a target="_blank">Log In</a>'),Ge=y('<p class="missing svelte-tp78xv">(Missing Portal URL)</p>'),Je=y("<p> </p>"),Qe=y('<p class="missing svelte-tp78xv">(Missing FHIR Endpoint)</p>'),We=y('<div class="portal-info svelte-tp78xv"><!> <h3><!></h3> <!> <!> <!></div>'),Ze=y('<div class="card svelte-tp78xv"><!> <div class="card-content"><h2> <!></h2> <!> <!> <!></div></div>');function $e(t,l){fe(l,!0);let a=3,u=$(!1);function v(r){r.target.src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1024' height='1024'><path d='M0 0h1024v1024H0z' style='fill:%23eee'/><text x='40' y='170' style='font-size:150px'>broken img :/</text></svg>"}var p=I(t,!0,Ze),z=A(p),C=f(f(z,!0)),n=A(C),h=A(n),E=f(h),H=f(f(n,!0)),c=f(f(H,!0)),D=f(f(c,!0));O(h,()=>{var r;return`${V((r=l.organization)==null?void 0:r.name)} `}),R(z,()=>l.organization.extension,r=>{var s=G(r),M=B(s);U(M,()=>l.organization.extension,65,(o,_,x)=>{var m=G(o),b=B(m);R(b,()=>g(_).url==="http://hl7.org/fhir/StructureDefinition/organization-brand",L=>{var P=G(L),i=B(P);U(i,()=>g(_).extension.filter(e=>e.url==="brandLogo"),65,(e,d,k)=>{var S=I(e,!0,Te),j=A(S);Y(j,"src",()=>g(d).valueUrl),te("error",j,v,!1),w(e,S)},null),q(L,P)},null),q(o,m)},null),q(r,s)},null),R(E,()=>{var r;return(r=l.organization)==null?void 0:r.partOf},r=>{var s=Z(r,!0,qe);q(r,s)},null),R(H,()=>l.organization.telecom,r=>{var s=I(r,!0,Ne),M=A(s);Y(s,"href",()=>l.organization.telecom.find(o=>o.system==="url").value),O(M,()=>l.organization.telecom.find(o=>o.system==="url").value),w(r,s)},null),U(c,()=>{var r;return(r=l.organization.address)==null?void 0:r.slice(0,F(u)?Math.Infinity:a)},65,(r,s,M)=>{var o=I(r,!0,Fe),_=A(o),x=f(f(_,!0)),m=f(f(x,!0)),b=A(m),L=f(f(b,!0)),P=f(f(L,!0)),i=f(f(m,!0));R(_,()=>g(M)>0,e=>{var d=I(e,!0,Pe);w(e,d)},null),R(x,()=>g(s).line,e=>{var d=I(e,!0,je),k=A(d);O(k,()=>g(s).line.join(", ")),w(e,d)},null),R(b,()=>g(s).city,e=>{var d=K(e);O(d,()=>`${V(g(s).city)},`),w(e,d)},null),R(L,()=>g(s).state,e=>{var d=K(e);O(d,()=>g(s).state),w(e,d)},null),R(P,()=>g(s).postalCode,e=>{var d=K(e);O(d,()=>g(s).postalCode),w(e,d)},null),R(i,()=>!F(u)&&g(M)===a-1&&l.organization.address.length>a,e=>{var d=I(e,!0,Be),k=f(A(d)),S=A(k);O(S,()=>`${V(l.organization.address.length-a)} more`),te("click",k,()=>ne(u,!F(u)),!1),w(e,d)},null),w(r,o)},null),U(D,()=>l.organization.extension.filter(r=>r.url==="http://hl7.org/fhir/StructureDefinition/organization-portal"),65,(r,s,M)=>{var o=I(r,!0,We),_=A(o),x=f(f(_,!0)),m=A(x),b=f(f(x,!0)),L=f(f(b,!0)),P=f(f(L,!0));U(_,()=>g(s).extension.filter(i=>i.url==="portalLogo"),65,(i,e,d)=>{var k=I(i,!0,Ve),S=A(k);Y(S,"src",()=>g(e).valueUrl),te("error",S,v,!1),w(i,k)},null),R(m,()=>{var i;return g(s).extension.find(e=>e.url==="portalName").valueString!==((i=l.organization)==null?void 0:i.name)},i=>{var e=K(i);O(e,()=>g(s).extension.find(d=>d.url==="portalName").valueString),w(i,e)},i=>{var e=Z(i,!0,Ye);q(i,e)}),R(b,()=>g(s).extension.find(i=>i.url==="portalDescription"),i=>{var e=I(i,!0,Ke),d=A(e);O(d,()=>g(s).extension.find(k=>k.url==="portalDescription").valueMarkdown),w(i,e)},null),U(L,()=>{var i;return(i=g(s))==null?void 0:i.extension.filter(e=>e.url==="portalUrl")},65,(i,e,d)=>{var k=I(i,!0,Xe);Y(k,"href",()=>{var S;return(S=g(e))==null?void 0:S.valueUrl}),w(i,k)},i=>{var e=I(i,!0,Ge);w(i,e)}),U(P,()=>g(s).extension.filter(i=>i.url==="portalEndpoint"),65,(i,e,d)=>{var k=I(i,!0,Je),S=A(k);O(S,()=>{var j;return`FHIR: ${V(((j=l.db[g(e).valueReference.reference])==null?void 0:j.address)||g(e).valueReference.reference)}`}),w(i,k)},i=>{var e=I(i,!0,Qe);w(i,e)}),w(r,o)},null),w(t,p),_e()}var et=y("Loading brand bundles...",!0),tt=y('<input class="search svelte-10e25op" type="text" placeholder="search"> <!> <div class="cards svelte-10e25op"></div>',!0);function lt(t,l){fe(l,!0);let a=Ie("brandStore"),u=$("");ae(()=>{Le(async function(){a.initialize();const h=new URLSearchParams(window.location.search).get("q");h&&ne(u,be(h))})}),ae(()=>{a.search({query:F(u)})}),ae(()=>{const n=()=>{2*window.innerHeight+window.scrollY>=document.body.offsetHeight&&a.nextPage()};return window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}});var v=Z(t,!0,tt),p=B(v);pe(p),me(p,!0);var z=f(f(p,!0)),C=f(f(z,!0));he(p,()=>F(u),n=>ne(u,n)),R(z,()=>a==null?void 0:a.loading,n=>{var h=Z(n,!0,et);q(n,h)},null),U(C,()=>(a==null?void 0:a.hits)||[],73,(n,h,E)=>{var H=G(n),c=B(H);$e(c,{get organization(){return g(h)},get db(){return a.db}}),q(n,H)},null),q(t,v),_e()}export{lt as component};
