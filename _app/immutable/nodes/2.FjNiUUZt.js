import{h as _e,r as T,e as O,f as Z,g as ie,i as de,j as ge,k as te,l as me,m as q,n as V,p as R,q as Y,u as ae,v as z,c as U,w as H,a as L,s as c,x as J,b as F,o as $,y as K,d as E,z as xe,A as pe,B as he,C as be}from"../chunks/disclose-version.BlJDKC_Q.js";import{e as Q,r as W,f as we,E as oe,h as ye,j as ue,k as le,l as ze,m as X,n as Ee,o as ve,q as ke,t as Ae,v as Ce,w as ee,a as fe,x as m,y as N,p as ce,z as re,u as Le,b as G,d as Ie,s as Se}from"../chunks/runtime.EwiG3e52.js";import{r as He}from"../chunks/entry.CoyKihMH.js";import{p as Me}from"../chunks/stores.-XjlcCB7.js";import{g as Re}from"../chunks/main-client.Cn7y-7OY.js";function Pe(){}function qe(a,r,o,v,n,h,w){const y=(o&X)!==0,u=ze(o,a);let k=null;_e(a,y);let f,A=null,d=null,I=!1;u.r=i=>{const _=k,x=_.s;x.add(i),i.f(()=>{x.delete(i),x.size===0&&_.e!==null&&(_.d!==null&&(T(_.d),_.d=null),Q(_.e),_.e=null)})};const t=()=>{const i={d:null,e:null,s:new Set,p:k},_=W(()=>{const x=u.d;x!==null&&(T(x),u.d=null);let p=u.a;(u.f&X)!==0&&(O===null?(p=me(),u.a.appendChild(p)):p=p.firstChild),h(p),i.d=u.d,u.d=null},u,!0);i.e=_,k=i},s=i=>{const _=i.f,x=(_&X)!==0,p=i.a;w(f,i,p,x,n,_,!0,A)},M=W(()=>{var x,p;const i=r();f=we(i)?i:i==null?[]:Array.from(i),v!==null?A=f.map(v):o&oe||f.map(Pe);const _=f.length;if(O!==null){const b=((p=(x=O)==null?void 0:x[0])==null?void 0:p.data)==="ssr:each_else";b&&_||!b&&!_?(T(O),Z(null),I=!0):b&&O.shift()}if(h!==null){if(_===0){if(u.v.length!==0||d===null){s(u),t();return}}else if(u.v.length===0&&k!==null){const b=k,S=b.s;S.size===0?b.d!==null&&(T(b.d),b.d=null):ie(S,"out")}}d!==null&&Ee(d)},u,!1);d=W(s,u,!0),I&&Z([]),ye(M,()=>{const i=u.f,_=u.a,x=(i&X)!==0;let p=k;for(;p!==null;){const b=p.d;b!==null&&T(b);const S=p.e;S!==null&&Q(S),p=p.p}w([],u,_,x,n,i,!1,A),Q(d)}),u.e=M}function D(a,r,o,v,n){qe(a,r,o,null,v,n,De)}function De(a,r,o,v,n,h,w){var y=r.v,u=r.s,k=y.length,f=a.length,A=Math.max(k,f),d=0,I,t;if(u.length!==0&&Te(u),f===0)for(I=[],v&&k!==0&&de(o);d<A;)t=y[d++],ne(t,u,w,v);else{var s,M=O!==null;if(I=Array(f),M){for(var i=O,_=i[0];d<A;d++){var x=ge(_);if(Z(x),!x)break;s=a[d],t=se(s,null,d,n,h),I[d]=t,_=x.at(-1).nextSibling.nextSibling}Oe(i,_)}for(;d<A;d++)d>=k?(s=a[d],t=se(s,null,d,n,h),I[d]=t,Ue(t,o,v,null)):d>=f?(t=y[d],ne(t,u,w)):(s=a[d],t=y[d],I[d]=t,Ne(t,s,d,h));M&&O===null&&Z([])}r.v=I}function Oe(a,r){if(r!==null){var o=a.indexOf(r);o!==-1&&a.length>o+1&&T(a.slice(o))}}function Ue(a,r,o,v){var n=a.d;return v===null?o?te(n,r,null):te(n,r.parentNode,r):te(n,null,v)}function Te(a){var r=a.length;if(r>0){for(var o=0,v,n;o<r;o++)v=a[o],n=v.r,n!==null&&(v.r=null,ne(v,null,!1));a.length=0}}function Ne(a,r,o,v){const n=a.v;v&ue&&le(n,r);const h=a.s,w=(v&ve)!==0,y=a.a;h!==null&&v&oe&&y!==null&&y(a,h),w?le(a.i,o):a.i=o}function ne(a,r,o,v=!1){const n=a.s;if(o&&n!==null){for(let w of n)w.r==="key"&&n.delete(w);if(n.size===0)a.s=null;else{ie(n,"out"),r!==null&&r.push(a);return}}const h=a.d;!v&&h!==null&&T(h),Q(a.e)}function se(a,r,o,v,n){const w=(n&ue)===0?a:n&Ae?ee(a):Ce(a),y=n&ve?ee(o):o,u=ke(w,y,r),k=W(f=>{v(null,f.v,f.i)},u,!0);return u.e=k,u}var je=E('<div class="card-logo svelte-tp78xv"><img alt="Organization Logo" class="svelte-tp78xv"></div>'),Be=E("(<code>ðŸ§©.partOf</code>)",!0),Fe=E('<a target="_blank"> </a>'),Ve=E('<hr style="width: 20px; display: inline-block">'),Ye=E("<p> </p>"),Ke=E("<p>... and <button> </button></p>"),Xe=E("<address><!> <!> <p><!> <!> <!></p> <!></address>"),Ge=E('<div class="card-logo svelte-tp78xv"><img alt="Portal Logo" class="svelte-tp78xv"></div>'),Je=E("Portal",!0),Qe=E('<p class="portal-description svelte-tp78xv"> </p>'),We=E('<a target="_blank">Log In</a>'),Ze=E('<p class="missing svelte-tp78xv">(Missing Portal URL)</p>'),$e=E("<p> </p>"),et=E('<p class="missing svelte-tp78xv">(Missing FHIR Endpoint)</p>'),tt=E('<div class="portal-info svelte-tp78xv"><!> <h3><!></h3> <!> <!> <!></div>'),at=E('<div class="card svelte-tp78xv"><!> <div class="card-content"><h2> <!></h2> <!> <!> <!></div></div>');function rt(a,r){fe(r,!0);let o=3,v=ee(!1);function n(t){t.target.src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='1024' height='1024'><path d='M0 0h1024v1024H0z' style='fill:%23eee'/><text x='40' y='170' style='font-size:150px'>broken img :/</text></svg>"}var h=H(a,!0,at),w=L(h),y=c(c(w,!0)),u=L(y),k=L(u),f=c(k),A=c(c(u,!0)),d=c(c(A,!0)),I=c(c(d,!0));q(k,()=>{var t;return`${V((t=r.organization)==null?void 0:t.name)} `}),R(w,()=>r.organization.extension,t=>{var s=J(t),M=F(s);D(M,()=>r.organization.extension,65,(i,_,x)=>{var p=J(i),b=F(p);R(b,()=>m(_).url==="http://hl7.org/fhir/StructureDefinition/organization-brand",S=>{var j=J(S),l=F(j);D(l,()=>m(_).extension.filter(e=>e.url==="brandLogo"),65,(e,g,C)=>{var P=H(e,!0,je),B=L(P);Y(B,"src",()=>m(g).valueUrl),ae("error",B,n,!1),z(e,P)},null),U(S,j)},null),U(i,p)},null),U(t,s)},null),R(f,()=>{var t;return(t=r.organization)==null?void 0:t.partOf},t=>{var s=$(t,!0,Be);U(t,s)},null),R(A,()=>r.organization.telecom,t=>{var s=H(t,!0,Fe),M=L(s);Y(s,"href",()=>r.organization.telecom.find(i=>i.system==="url").value),q(M,()=>r.organization.telecom.find(i=>i.system==="url").value),z(t,s)},null),D(d,()=>{var t;return(t=r.organization.address)==null?void 0:t.slice(0,N(v)?Math.Infinity:o)},65,(t,s,M)=>{var i=H(t,!0,Xe),_=L(i),x=c(c(_,!0)),p=c(c(x,!0)),b=L(p),S=c(c(b,!0)),j=c(c(S,!0)),l=c(c(p,!0));R(_,()=>m(M)>0,e=>{var g=H(e,!0,Ve);z(e,g)},null),R(x,()=>m(s).line,e=>{var g=H(e,!0,Ye),C=L(g);q(C,()=>m(s).line.join(", ")),z(e,g)},null),R(b,()=>m(s).city,e=>{var g=K(e);q(g,()=>`${V(m(s).city)},`),z(e,g)},null),R(S,()=>m(s).state,e=>{var g=K(e);q(g,()=>m(s).state),z(e,g)},null),R(j,()=>m(s).postalCode,e=>{var g=K(e);q(g,()=>m(s).postalCode),z(e,g)},null),R(l,()=>!N(v)&&m(M)===o-1&&r.organization.address.length>o,e=>{var g=H(e,!0,Ke),C=c(L(g)),P=L(C);q(P,()=>`${V(r.organization.address.length-o)} more`),ae("click",C,()=>re(v,!N(v)),!1),z(e,g)},null),z(t,i)},null),D(I,()=>r.organization.extension.filter(t=>t.url==="http://hl7.org/fhir/StructureDefinition/organization-portal"),65,(t,s,M)=>{var i=H(t,!0,tt),_=L(i),x=c(c(_,!0)),p=L(x),b=c(c(x,!0)),S=c(c(b,!0)),j=c(c(S,!0));D(_,()=>m(s).extension.filter(l=>l.url==="portalLogo"),65,(l,e,g)=>{var C=H(l,!0,Ge),P=L(C);Y(P,"src",()=>m(e).valueUrl),ae("error",P,n,!1),z(l,C)},null),R(p,()=>{var l;return m(s).extension.find(e=>e.url==="portalName").valueString!==((l=r.organization)==null?void 0:l.name)},l=>{var e=K(l);q(e,()=>m(s).extension.find(g=>g.url==="portalName").valueString),z(l,e)},l=>{var e=$(l,!0,Je);U(l,e)}),R(b,()=>m(s).extension.find(l=>l.url==="portalDescription"),l=>{var e=H(l,!0,Qe),g=L(e);q(g,()=>m(s).extension.find(C=>C.url==="portalDescription").valueMarkdown),z(l,e)},null),D(S,()=>{var l;return(l=m(s))==null?void 0:l.extension.filter(e=>e.url==="portalUrl")},65,(l,e,g)=>{var C=H(l,!0,We);Y(C,"href",()=>{var P;return(P=m(e))==null?void 0:P.valueUrl}),z(l,C)},l=>{var e=H(l,!0,Ze);z(l,e)}),D(j,()=>m(s).extension.filter(l=>l.url==="portalEndpoint"),65,(l,e,g)=>{var C=H(l,!0,$e),P=L(C);q(P,()=>{var B;return`FHIR: ${V(((B=r.db[m(e).valueReference.reference])==null?void 0:B.address)||m(e).valueReference.reference)}`}),z(l,C)},l=>{var e=H(l,!0,et);z(l,e)}),z(t,i)},null),z(a,h),ce()}var nt=E("Loading brand bundles...",!0),lt=E('<input class="search svelte-10e25op" type="text" placeholder="search"> <!> <div class="cards svelte-10e25op"></div>',!0);function ft(a,r){fe(r,!0);const o={};Le(o);const v=()=>Se(Me,"$page",o);let n=Re("brandStore"),h=ee("");G(()=>{Ie(async function(){const f=v().url.searchParams.getAll("bundle");n.initialize(f);const A=v().url.searchParams.get("q");A&&re(h,be(A))})}),G(()=>{const f=new URLSearchParams(window.location.search);N(h)!==f.get("q")&&(f.set("q",N(h)),He("?"+f.toString(),{}))}),G(()=>{n.search({query:N(h)})}),G(()=>{const f=()=>{2*window.innerHeight+window.scrollY>=document.body.offsetHeight&&n.nextPage()};return window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}});var w=$(a,!0,lt),y=F(w);he(y),xe(y,!0);var u=c(c(y,!0)),k=c(c(u,!0));pe(y,()=>N(h),f=>re(h,f)),R(u,()=>n==null?void 0:n.loading,f=>{var A=$(f,!0,nt);U(f,A)},null),D(k,()=>(n==null?void 0:n.hits)||[],73,(f,A,d)=>{var I=J(f),t=F(I);rt(t,{get organization(){return m(A)},get db(){return n.db}}),U(f,I)},null),U(a,w),ce()}export{ft as component};
